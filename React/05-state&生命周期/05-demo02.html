<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>05-state时钟组件</title>
</head>

<body>
	<div id="root"></div>
	<script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
	<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
	<!-- <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
	<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script> -->
	<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

	<script type="text/babel">
	// 定义时钟组件
    class Clock extends React.Component {
		// 构造函数
        constructor(props) {
			// 将props对象传给父类，调用父类的构造函数
            super(props);
            this.state = {date: new Date()};
		}
		// 声明挂载方法 
		componentDidMount() {
			// 设置定时器，保存计时器ID
			this.timerID = setInterval(() => this.tick(), 1000);
		} 
		// 声明卸载方法
		componentWillUnmount() {
			// 清除计时器
			clearInterval(this.timerID);
		}
		// 设置state的数据
		tick() {
			this.setState({
				date: new Date()
			});
		}
		// state发生改变时，render()方法会被调用
        render() {
            return (
                <div>
                    <h1>Hello, world!</h1>
                    <h2>It is {this.state.date.toLocaleTimeString()}</h2>
                </div>
            );
        }
    } 
	ReactDOM.render(
		<Clock />,
		document.getElementById("root")
	);
    </script>
</body>

</html>